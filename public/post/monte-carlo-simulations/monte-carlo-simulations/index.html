<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Stanley Z. Hua">

  
  
  
    
  
  <meta name="description" content="After a bad roll, should you expect your luck to turn?">

  
  <link rel="alternate" hreflang="en-us" href="/post/monte-carlo-simulations/monte-carlo-simulations/">

  


  
  
  
  <meta name="theme-color" content="#ffffff">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" disabled>
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark">
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu3e47dcbe8f840c0d5ef5459aa0cce648_690099_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu3e47dcbe8f840c0d5ef5459aa0cce648_690099_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/post/monte-carlo-simulations/monte-carlo-simulations/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="Stanley Z. Hua">
  <meta property="og:url" content="/post/monte-carlo-simulations/monte-carlo-simulations/">
  <meta property="og:title" content="Monte Carlo Simulations | Stanley Z. Hua">
  <meta property="og:description" content="After a bad roll, should you expect your luck to turn?"><meta property="og:image" content="/img/me">
  <meta property="twitter:image" content="/img/me"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-07-04T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2020-07-11T22:55:04-04:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/monte-carlo-simulations/monte-carlo-simulations/"
  },
  "headline": "Monte Carlo Simulations",
  
  "datePublished": "2020-07-04T00:00:00Z",
  "dateModified": "2020-07-11T22:55:04-04:00",
  
  "author": {
    "@type": "Person",
    "name": "Stanley Z. Hua"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Stanley Z. Hua",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/logo_hu65ab962506affe5c14e8a2f7a1d1d040_271848_192x192_fit_lanczos_2.png"
    }
  },
  "description": "After a bad roll, should you expect your luck to turn?"
}
</script>

  

  


  


  





  <title>Monte Carlo Simulations | Stanley Z. Hua</title>

</head>
<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="dark">

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  








  


<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/"><img src="/images/logo_hu65ab962506affe5c14e8a2f7a1d1d040_271848_0x70_resize_lanczos_2.png" alt="Stanley Z. Hua"></a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/"><img src="/images/logo_hu65ab962506affe5c14e8a2f7a1d1d040_271848_0x70_resize_lanczos_2.png" alt="Stanley Z. Hua"></a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/"><span>Home</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/experience/"><span>Experiences</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#projects"><span>Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/courses/"><span>Courses</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/post/"><span>Posts</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      

      

    </ul>

  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Monte Carlo Simulations</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
          Last updated on
      
    
    Jul 11, 2020
  </span>
  

  

  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/r/">R</a></span>
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      


<details>
<summary>
If you’re trying to simulate a random event for whatever reason using R, then you’ve come to the right place!
</summary>
<p>
<blockquote>
<p>If not, or if you do not have true or estimated probabilities for your simulation, then this is not for you!</p>
</blockquote>
</p>
</details>
<hr />
<div id="premise" class="section level3">
<h3><em>Premise</em></h3>
<p>Say you want to understand how randomness works, and you want to roll a 12-sided die and see how many times it lands on 1. You’ll do roll a die 100, 10,000, 1,000,000 times.</p>
<p><strong><em>Note:</em></strong> Every side of the die has a probability of 1/12, but the outcome of each roll is random and independent from one another.
<br><br></p>
</div>
<div id="step-0-set-the-seed-to-some-arbitrary-constant.-optional" class="section level3">
<h3><strong>Step 0:</strong> Set the seed to some arbitrary constant. (Optional)</h3>
<pre class="r"><code>set.seed(2009, sample.kind=&quot;Rounding&quot;)    #for R 3.6 and later

set.seed(2009)                            #for 3.5 and older</code></pre>
<p>If you wish to observe the same results for lower numbers of draws, you can place this at the start of your script.
<br><br></p>
</div>
<div id="step-1-construct-a-method-for-sampling." class="section level3">
<h3><strong>Step 1:</strong> Construct a method for sampling.</h3>
<pre class="r"><code>Ns = c(100, 10000, 1000000)                                          #number of simulations

simulations &lt;- sapply(Ns, function(N){
  sim &lt;- sample(c(1, -1), N, replace=TRUE, prob=c(1/12, 11/12))   #sampling
  mean(sim == 1)                                                  #find the proportion of rolls which are 1 (success)
})</code></pre>
<table>
<thead>
<tr class="header">
<th align="center">Sample.Size</th>
<th align="center">Proportion.Observed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1e+02</td>
<td align="center">0.100000</td>
</tr>
<tr class="even">
<td align="center">1e+04</td>
<td align="center">0.080500</td>
</tr>
<tr class="odd">
<td align="center">1e+06</td>
<td align="center">0.082511</td>
</tr>
</tbody>
</table>
<p>The sample function takes N rolls (with replacement). The result can either be 1; a success (landing on 1), or -1; a failure (not landing on one). The keyword argument “prob” defines the probability for possible events success or failure.</p>
<p>As you can see from the results, the <strong><em>proportion</em></strong> of rolls landing on 1 converges to the probability we defined it to be (1/12 = 0.0833), as the <strong><em>number</em></strong> of rolls increases.</p>
<p><br></p>
<p>To close, it may be good to point out a common misconception when it comes to expectation. Say if you and your friends are tossing a coin and it lands on heads, you might be tempted to say “The next one will be tails!”, but that’s wrong. We know logically that the probability of either side landing is 1/2, but we would only be able to observe this when we sum up the results of maybe a thousand or hundred thousand rolls, as we have just done.
<br></p>
<p>The <em>Law of Large Numbers</em> (or <em>the Law of Averages</em>) states that as the number of draws (rolls) increases, the standard error (standard deviation but for samples) of the expected value approaches 0. In which case, the expected value converges to the probability we defined.
<br><br></p>
<p><strong>NOTE</strong>: For cases wherein the probability is not defined, we can use the <code>replicate</code> function that takes two arguments. The second argument defines a line or set of lines to replicate, while the first argument is the number of times you wish to repeat the second argument.</p>
<p><em>Example</em>: Creating a list of sample means.</p>
<pre><code>array                           # a non-empty numeric array of length 100,000
B &lt;- 1000                       # number of replications
N &lt;- 100                        # number of samples
sample_means &lt;- replicate(B, {
    sample_array &lt;- sample(array, N, replace=TRUE)
    mean(sample_array)          #like a function; this is returned
})
</code></pre>
<p><br><br></p>
<p><strong><em>Enrichment</em></strong></p>
<p>You can try to compute for the standard error for each simulation using the formula:</p>
<p><span class="math inline">\(SE[\overline{X}]=|b-a|*\frac{\sqrt{p(1-p)}}{N}\)</span></p>
<div class="line-block">    where SE means standard error;<br />
                X_bar is the sample random variable;<br />
                a and b are the values we attribute to success and failure (i.e. 1 and -1);<br />
                p is the probability of success (i.e. 1/12);<br />
                and N is the sample size.</div>
<style>
      h3{font-weight:normal;}
</style>
</div>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/modeling/">Modeling</a>
  
  <a class="badge badge-light" href="/tag/statistics-and-probability/">Statistics and Probability</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/monte-carlo-simulations/monte-carlo-simulations/&amp;text=Monte%20Carlo%20Simulations" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/monte-carlo-simulations/monte-carlo-simulations/&amp;t=Monte%20Carlo%20Simulations" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Monte%20Carlo%20Simulations&amp;body=/post/monte-carlo-simulations/monte-carlo-simulations/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/monte-carlo-simulations/monte-carlo-simulations/&amp;title=Monte%20Carlo%20Simulations" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Monte%20Carlo%20Simulations%20/post/monte-carlo-simulations/monte-carlo-simulations/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/post/monte-carlo-simulations/monte-carlo-simulations/&amp;title=Monte%20Carlo%20Simulations" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
  





  
    
    
    
      
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-circle" src="/author/stanley-z.-hua/avatar_hu8d353bc085e176007ed35428d997d133_288075_270x270_fill_q90_lanczos_center.JPG" alt="Stanley Z. Hua">
      

      <div class="media-body">
        <h5 class="card-title"><a href="/">Stanley Z. Hua</a></h5>
        <h6 class="card-subtitle">Undergraduate</h6>
        <p class="card-text">Documenting interesting concepts for the future.</p>
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="mailto:stanley.hua@mail.utoronto.ca" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/stanley-z-hua" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/stan-hua" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.kaggle.com/stanleyhua" target="_blank" rel="noopener">
        <i class="fab fa-kaggle"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  














  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/post/distributions/variety/">Distributions</a></li>
      
    </ul>
  </div>
  





  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.66c553246b0f279a03be6e5597f72b52.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    
  </p>

  
  






  <p class="powered-by">
    &copy;2020 &middot; Powered by the <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic</a> theme.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
